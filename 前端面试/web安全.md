### Web安全

私密性：不被非法获取，盗用。

可靠性：内容不会被修改、丢失或额外注入。

#### 攻击类型

#### CSRF跨域请求伪造

防御：同源策略中的referer，查看请求的网页来源是否为同源网站，但容易被更改。

双重cookies方法，客户端第一次请求时服务器端会返回一个cookies储存在客户端，在每次请求时都会携带这个cookies，那么再下一次请求时客户端获取这个cookies信息并将其添加到url参数中，服务器端将这个cookies进行对比查看是否为安全网站，这利用到了攻击者可以访问cookies而不能获取cookies的原理。

使用token令牌防御，服务器端为客户端发放一个token储存在客户端中，储存一个随机数，在之后的每次请求中都携带着这个token，与储存在服务器端的进行对比，但缺点是我们不仅仅只有一个服务器端，需要为每个服务器端都配置一个token进行与请求中的token对比，当我们进行负载平衡时，请求也会被转移到其他服务器，这样就要重新生成新的token。

为cookies设置samesite属性，限制cookies不被第三方获取。

#### XSS跨站脚本攻击

防御：XSS防御可分为在浏览器端向服务器端请求阶段的防御和浏览器端执行代码时的防御。首先浏览器端向服务器端请求阶段的防御可通过对代码进行转义处理，但浏览器端每次提交的位置不同因此转义处理不是很好的方案。其次可在浏览器执行代码阶段防御，首先可为http头部设置httponly属性，意味着cookies不能被js脚本获取，这样保证了cookies的安全性，同时还可以设置验证码，保证执行代码的为用户而不是攻击者，还可以使用CPS，为浏览器建立一份白名单，通知浏览器哪些资源可以访问，防止恶意代码的访问与攻击。CSP为内容安全策略，两种方式进行设置，第一种为http头部设置“Content-Security-Policy"，另一种为meta标签内设置http-equiv="Content-Security-Policy"。

#### SQL注入：

SQL是一种结构化查询语言，是一种特殊目的的编程语言，是一种数据库查询和结构设计语言，用于存储数据以及查询、添加、修改和删除数据的操作关系型数据库的语言。SQL注入是攻击者通过用户在进行http请求的过程中注入恶意的SQL代码，当服务器在使用参数构建数据库SQL命令时，恶意的SQL代码也会被一起构建，并在数据库中执行产生意料之外的结果的攻击行为。

防御：永远不要使用动态的方式拼接sql，并不轻易信任用户的输入，不把机密信息直接存放。

#### 点击劫持：

是一种视觉欺骗的手段，攻击者将需要攻击的网站通过iframe嵌套的方式嵌入网页中，并将外观设置为透明，在底部透出一个按钮诱导用户去点击从而跳转到攻击网站。防御方法有两种：X-FRAME-OPTIONS作为http响应头部，可选值有DENY，表示页面不允许任何iframe展示；还有SAMEORIGIN，表示页面可以在相同域名下通过iframe的方法展示。以及ALLOW-FROM，表示页面可以在指定来源的iframe中展示。另一种防御方法时通过JS防御。

#### 中间人攻击：

中间人攻击是攻击人同时与客户端和浏览器端建立联系，并且让对方认为连接是安全可靠的，但实际上整个连接都被攻击者控制，攻击者可以任意获取连接中的信息并改写信息。通常来说不建议使用公共WiFi，因为很可能就会发生中间人攻击的情况，如果在通信的过程中涉及到了某些私密信息就很有可能会被窃取。防御中间人攻击可以通过使用https协议。